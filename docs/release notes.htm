<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" lang="en">
	<title>netPhotoGraphics release notes</title>
	<style type="text/css">
		body, td, pre {
			text-align:left !important;
			color:#000;
			font-family:Arial, Helvetica, sans-serif;
			font-size:13px;
			margin:8px;
			line-height: 20px;
		}
		body {
			text-align:left !important;
			background:#FFF;
		}
		h1 {
		text-align: center !important;
		font-size: 2em;
		}
		h2 {
		font-size: 1.5em;
		}
		h3 {
		font-size: 1.17em;
		}
		h4 {
			 font-family: Arial, Helvetica, Sans-Serif;
			 font-size: 15px;
			 color: #396;
			 margin-top: 20px;
			 font-weight: normal;
			 margin-bottom: 2px;
		}
		h5,
		h6 {
			font-family: Arial, Helvetica, Sans-Serif;
			 font-size: 13px;
			 font-weight: bold;
			 color: black;
			 margin-top: 20px;
			 margin-bottom: 0 !important;
		}
		h6 {
			font-style: italic;
		}
		code {
			color: #00008B;
			font-size: 12px;
			font-family: Arial, Helvetica, sans-serif;
		}
		 pre {
			color: #00008B;
			margin-left: 0px;
			background-color: #f2f2f2;
			padding: 0.5em;
			font-size: 12px;
			font-family: Courier, Geneva, monospace;
			overflow: auto;
		}
		tt,
		.inlinecode {
			color: #00008B;
			font-size: 13px;
			font-weight: bold !important;
		}
		a {
			text-decoration: none;
			color: #6c802e;
		}
		ol {
			display: block;
			list-style-type: decimal;
			margin-top: 1em;
			margin-bottom: 1em;
			margin-left: 0;
			margin-right: 0;
			padding-left: 40px;
		}
	</style>
	</head>
	<body>
<h1>netPhotoGraphics release notes</h1><h2 style="text-align: center;">VersionÂ 1.8.0.10.DEV_02</h2>
<h2>General</h2>
<p>Â </p>
<hr />
<h2 style="text-align: center;">VersionÂ 1.8</h2>
<h2>General</h2>
<p>With this release, the name of the software has changed from ZenPhoto20 to netPhotoGraphicsâ„¢.</p>
<p>We have invested in a new version of our language translation utilityâ€”Â­Â­Â­PoEdit. This version uses Microsoft Translator for web based automatic translations which should give a better mechanical translations. Still we encourage you to contribute bu reviewing your language in the PoEditÂ editor and submitting updates for inclusion with ZenPhotoGraphics.</p>
<p>This release fixes multiple bugs and improves performance. For details see the change log.</p>
<h2>Plugins</h2>
<p><em>googleTFA</em></p>
<p>This plugin is a handler for authentication via the Google Authenticator App.Â If a user has enabledÂ <em>Two Factor Authentication</em>Â there will be an extra step added to his logon process. After hisÂ <code>user name</code>Â andÂ <code>password</code>Â have been verified he will be asked to supply theÂ <code>token</code>Â generated by the Google Authenticator App. If theÂ <code>token</code>Â he enters is valid the logon will complete.</p>
<p><em>qrcode</em></p>
<p>A pluginÂ to print QR code images.</p>
<hr />
<h2 style="text-align: center;">VersionÂ 1.7</h2>
<h2>General</h2>
<p>This release fixes multiple bugs and security holes. For details see the change log.</p>
<p>There has been a slight reorganization of the Administrative Overview section. The "Installation information" section is now a separate page accessible from the OVERVIEW fly-out. User information has been added to the Gallery stats display.</p>
<p>Security</p>
<p>The <em>Security</em>, <em>Setup</em>, and <em>Debug</em> logs can be encrypted. This provides additional protection of possible sensitive data in these files. The options to encrypt the logs is found on the <em>Security</em> options page. All encryption requires that the <em>php_openssl</em>Â extension is enabled.</p>
<p><strong>Note</strong>: The log encryption depends on reading the state of an option. So if the log entry is generated before option handling is initialized the entries will NOT be encrypted. This could happen the database is not available such as in the early stages of page loading. In these cases your log may have a mixture of encrypted and unencrypted records. When these are displayed on the <em>Logs</em> page the unencrypted records will be garbled.</p>
<p>A further consideration is that encrypted records cannot be deciphered "off line." You should carefully consider which logs you encrypt.Â  For instance, the records of a site crash may not be available for analysis until the site is back up and running. This would make analyzingÂ and correcting the problem more difficult.Â </p>
<h2>GDPR</h2>
<p>Some tools have been added to help sites conform to theÂ <a href="https://en.wikipedia.org/wiki/General_Data_Protection_Regulation">General Data Protection Regulation</a>. There is a new general option,Â <em>Usage policy</em>, which if enabled will force viewers to acknowledge your site usage policy.Â  A new function,Â <code>policySubmitButton()</code>, will display a checkboxÂ until the viewer has acknowledged the policy (by checking the box.) The "submit" button replaces this checkboxÂ once the acknowledgement has occurred.Â </p>
<p>The acknowledged state is persistent. For a registered user it remains until cleared by the administrator. For anonymous visitors it is retained by a cookie so will persist until the cookie expires. (If <em>gallery sessions</em> is enabled it persists for the visitor's session.)</p>
<p>Standard forms, such as the <em>comment form</em>, which may capture user data, implement this button. There is also a new plugin, <em>GDPR_required, </em>that allows you to redirect first time viewers to your site usage page for confirmation before they can view any other content.</p>
<p><em>GDPR and cookies</em></p>
<p>Your site usage policy should includeÂ a statement about the use of cookies. For best viewing experience ZenPhoto20 uses cookies to save browsing state via the viewer's web client. These are used for such things as remembering logins, policy page acknowledgements, search parameters, form data, etc. Cookies will expire based on the setting of <em>cookie duration. </em>(Some will persist for shorter periods.). A visitor always has the option of viewing and clearing cookie data via his browser settings. None of this cookie information is saved on the web server. It exists only in the web client and fleetingly during page generation on the server.</p>
<p>If use of cookies is an issue for your site they may be avoided by using <em>gallery sessions</em>. With this option in use state that would normally be in a cookie in the client browser will be contained in a PHPÂ session variable. (Note: PHPÂ session handling actually uses a cookie in the web client in order to identify the session variable.) PHPÂ sessions will normally expire when the web client closes, but may persist for less time. Usually usingÂ PHPÂ sessions for clientÂ viewing state provides an unsatisfactory user experience.</p>
<p><em>GDPR and IP addresses</em></p>
<p>The GDPR states that IP addresses should be considered personal data as it enters the scope of â€˜<em>online identifiers</em>â€™. See the description of <a href="https://eugdprcompliant.com/personal-data/">personal data</a>.</p>
<p>Your site usage policy statement may need to address these uses. They are described below:</p>
<p>Security uses*:</p>
<ol>
<li>The <em>accessThreshold plugin</em> records site visit frequency by IP address for the purpose of blocking denial of service attacks.</li>
<li>The <em>IP_blocker plugin</em> allows an administrator to manually enter an IP address that is to be denied (allowed) access to the site.</li>
<li>The security log contains the IP address of site which caused the security log entryâ€ .</li>
<li>In the logging of 404 errors to the debug log.</li>
</ol>
<p>â€ Except for the security log, there is no direct link between and IP address and a user. Encrypt the content of the security log for further protection of this data.</p>
<p>Uses as a unique identifier*:Â </p>
<ol>
<li>Cached searches</li>
<li>Search statistics</li>
<li>Rating</li>
<li>Recorded comments</li>
</ol>
<p>*If the <em>php_openssl</em>Â library is enabled the IP address will be encrypted.</p>
<h2>jQuery</h2>
<p>We have migrated to <em>jQueryÂ </em>version 3.3 with this release since older versions of jQueryÂ are no longer inÂ support.<em> jQueryÂ v3.3</em> has several deprecations that require script upgrades. See the <a href="https://jquery.com/upgrade-guide/3.0/">jQueryÂ Core 3.0 Upgrade Guide</a> for details. ZenPhoto20 now has provisions to support the <a href="https://github.com/jquery/jquery-migrate/#README"><em>jQueryÂ Migrate Plugin</em></a>Â or revert (for themes) to <em>jQueryÂ v1.12</em> via options in the <em>Debug</em> plugin. You may need to set these options to run or update incompatible scripts.</p>
<p><strong>Tags</strong></p>
<p><em>Tags</em> may now be classified as "private." Within tag administration, private tags are indicated by a highlight, e.g. <span style="background-color: gold;">aTag</span>.Â Only users with <em>TAGS_RIGHTS</em> will have visibility to private tags. This means they will not show up in tag suggestions, tag clouds, or searchÂ results for the general public or for users who do not have <em>TAGS_RIGHTS</em>.Â </p>
<p>Private tags may be used for such things as identifying images for dynamic albums without exposing this organization to the site visitors. For custom search results you may invoke the class search methodÂ <code>setSearchPrivateTags()</code> to cause private tags to be found.</p>
<h2>Searches</h2>
<p>Processing of search strings has been enhances. You may now use the backslash (\) character to escape a quotation thus rendering the mark a literal character rather than the delimiter for a string sequence. For example searching on <code>123"45&amp;67"890</code> would normally render a search string of <code>12345&amp;67890</code>. (The &amp; is treated as part of the string, not the AND operator.)Â <code>123\"45&amp;67\"890</code>Â would result in two target strings, <code>123"45</code>Â andÂ Â <code>67"890</code>, both of which must be present (because of the &amp;.)</p>
<p>There is now a search property named <code>specialCharacters</code>. it is an array containing indexed by character (quotation marks and backslash) If you set the value of a characterÂ to false it will have no special meaning in the parsing of search strings. (E.g. <code>$search_engine-&gt;specialCharacters['\\]=false;</code> will disable the escape character and treat it simply as a backslash.</p>
<p>Specifying search fields with a bit mask has been deprecated. It is unlikely that this feature is used anywhere as it was from the early days of zenphoto. If a use is detected, a deprecated message will be placed in the debug log.</p>
<h2>Plugins</h2>
<p><em>defaultCodeblocks</em></p>
<p>There are now individual codeblockÂ sets for each object (gallery, image, album, article, news category, and page.) This enables a different default for each. The codeblocksÂ set from prior releases will be imported into each of the object codeblocksÂ that were checked in the <em>Objects</em> option.</p>
<p><em>GDPR_required</em></p>
<p>A plugin to require that visitors view and acknowledge a site policy page upon the firstÂ visit to your site.Â The pluginÂ requires a<em> zenpage page</em>Â object or aÂ custom page script which states the site usage policy. See the pluginÂ usage information for implementation details.</p>
<p>The pluginÂ contains a methodÂ <code>GDPR_required::button()</code> that may be placed in a codeblockÂ of your <em>zenpageÂ page</em> or as part of your custom page script. This method will display a policySubmitButtonÂ that will redirect to the site index page.</p>
<p><em>rating</em></p>
<p>The <code>Disguise IP</code> option has been removed as it is now redundant. The IP address is now always encrypted. It is suggested you clear ratings with this update since old ratings cannot be associated with the originator.</p>
<p><em>zenpage</em></p>
<p>There is now an option, <em>News label,</em>Â to set the "name" of news items. This will allow you to show a different name, for instance "Blog," on your website. The option also changes the rewrite token forÂ <em>news</em> to match. For multilingual sites, the token will be set from the site language string for the option if present. If not it will default to the string for the current locale, the en_US string, or the first language string, which ever is present.</p>
<p>Note: Themes should now use the defineÂ <code>NEWS_LABEL</code>Â instead ofÂ <code>gettext("News")</code>. The distributed themes have been updated to use <code>NEWS_LABEL</code> in places where the text "news" appeared. These changes include theme custom menus, but existing custom menus must be deleted and repopulated before the new structures will be used.</p>
<p><em>zoomImage</em></p>
<p>Provides a function to displays a zoomable image based onÂ <a href="http://jacklmoore.com/zoom/">jQuery Zoom</a>Â by Jack Moore.Â The viewer may <em>zoom in</em>Â on the image using mouse or touch/press actions. There are four behaviors for the zooming.</p>
<p><em>cookieconsent</em></p>
<p>A pluginÂ ported from the legacy zenphotoÂ to add a cookie notify dialog to comply with the EU cookie law and Google's requirement for Google Ads and more <a href="https://www.cookiechoices.org">https://www.cookiechoices.org</a>. This is a "light-weight" alternative to the GDPR_required pluginÂ dealing with cookies only.</p>
<p><em>openstreatmap</em></p>
<p>A plugin for showing OpenStreetMap maps usingÂ <a href="http://leafletjs.com/">LeafletJS</a>Â for images, images from albums with embeded geodata, or from custom geodata. Ported from legacy zenphoto.</p>
<p><em>scriptless-socialsharing</em></p>
<p>A pluginÂ portedc from legacy zenphotoÂ that provides numerous social media buttons. The specific buttons displayed are selectable by pluginÂ option.</p>
<h2>Themes</h2>
<p><em>Gray_highlights</em></p>
<p>This theme has been removed from the ZenPhoto20 distribution,</p>
<p><em>Basic</em></p>
<p>The Basic theme now has support for <em>Articles</em> and <em>Pages</em>. Of course, the support is "basic."</p>
<hr />
<h2 style="text-align: center;">Version 1.6.0</h2>
<h2>General</h2>
<p>This release fixes multiple bugs and security holes. For details see the change log.</p>
<p>ZenPhoto20 now provides a fall-back translation facility for cases where a site does not have the PHP <em>gettext module</em> or where translations are otherwise not working. This facility is invoked when ZenPhoto20 notices that the function <code>gettext()</code> is not present. You can disable the gettextÂ module by editing your PHP.ini file. Find the line which reads <code>extension=php_gettext.dll</code> and place a semicolon in front of the text, e.g. <code>;extension=php_gettext.dll. </code>Note: the PHPÂ module is the preferred translation facility. Using the fall-back comes with some performance loss. Also note that number formatting is controlled by the locale settings, not <code><em>gettext</em></code>. If PHPÂ <em>gettextÂ </em>does not work because of locale issues your number formatting may not be correct</p>
<h2>Tags</h2>
<p>The language tag implementation has been enhanced so that language specific translations of tags can be organized under a "master:" tag. (Presumably this would be the tag in the administrator's native language.) These language "subtags" will be ordered by language and indented under the master tag. When there is a checkbox, the master tag checkboxÂ will also apply to the language subtags.</p>
<p>If the <em>multi-lingual</em> option is set and you create a new tag with a language specified or assign a language to a tag which was previously language independent thenÂ subtagsÂ for each of the site active languages will automatically be created. The initial value of the tag will be the master tag text with a language indicator postpended. Once created you can edit the subtag text to provide the translation.</p>
<p>Notes:</p>
<p>Tags uniqueness now includes the language. That is the same tag spelling is possible so long as the assigned language is different. Thus it is now possible to have bothÂ  the English tag "table" and the French tag "table." However, only unique tags are listed for objects as there is no language association there. So if in the example above, only one instance of "table" will be listed.</p>
<h2>plugins</h2>
<p><em>VideoJS</em></p>
<p>The pluginÂ provides support for the Video.JS video player (videojs.com). It will play video natively via HTML5 in capable browsers. if the appropiate multimedia formats are provided. It will fall back to flash in older browsers. The player size is responsive to the browser size and is is capable of switching between HD and SD video files.</p>
<p><em>cacheManager</em></p>
<p>The <code>cacheManager</code>Â pluginÂ has been updated to properly handle theme options such as <em>thumb crop</em>.Tthe appropriate cache sizes will be registered for the theme based on these options. Prior to this enhancement the themes were assuming cropped images, for instance. In addition, cache sizes will be registered for themes assigned as an album theme. The options for album themes may differ from the basic theme, so separate registration is needed. Album themes will automatically be checked as is with the current theme.</p>
<p><em>zenpage</em></p>
<p>The "Truncate at <em>pagebreak</em>"Â checkboxÂ has been removed from the <em>article</em> edit page. This setting is redundant as content shortening will always occur at a page break so long as there is one before the truncation limit. The article methods <code>getTruncation()</code> and <code>setTruncation()</code> are also removed. These were for internal use only and not needed.</p>
<p>New zenpage links now will have the <em>mod rewrite suffix</em> appended to better conform with SEOÂ friendly URLs. Existing articles and pages will left as they were. However should you want to migrate all <em>titlelinks</em>Â the <code>titlelinkMigration </code>pluginÂ will provide that function. Coincident to this change, changing the <em>mod_rewrite_suffix</em> on the general options page will also update the <em>titlelinks.Â See also the note on the <code>titlelinkMigrationÂ </code>plugin. Also</em> the <em>unique images</em> option has been decoupled from the <em>mod rewrite suffix</em> .</p>
<p><em>titlelinkMigration</em></p>
<p>This utility will add the<em> mod rewrite suffix</em> to all article or page <em>titlelinksÂ </em>that do not already have it as a suffix.Â <strong>NOTE</strong>: migration may result in duplicated <em>titlelinks</em>. If that would be the case, the <em>titlelink</em> will not be changed. This occurrence will be logged in the debug log. Should a migrated object be accessed with the old link without the <em>mod_rewrite_suffix</em> the browser will be permanently redirected to the new suffix form.Â </p>
<p><em>reCaptcha,Â reCaptcha_v2</em></p>
<p>Google has updated its reCAPTCHAÂ scripts to version 2 and has disabled the old reCAPTCHAÂ methods. ZenPhoto20 now supplies the <em>reCaptcha_v2</em> pluginÂ which works with Google's new implementation. The <em>reCaptcha</em>Â pluginÂ has now been removed.Â </p>
<p>You will need to register new credentials for <em>reCaptcha_v2</em> and switch to this plugin. The hidden theme of<em> reCAPTCHAÂ v2</em> requires modifications to the <em>submit</em> button on the form to function. See the <em>register_user_form</em> script for details on this implementation.</p>
<p><em>piwik</em></p>
<p>The name of this pluginÂ has been changed to <em>MatomoÂ </em>in accordance to the same change made by theÂ developers. See theÂ <a href="https://matomo.org/blog/2018/01/piwik-is-now-matomo/">developer's notice</a>. Any settings you have made for <em>piwik </em>will migrate to the new plugin.</p>
<p><em>lazyImage</em></p>
<p>This is a new pluginÂ that implements lazy loading of images.Â <em>Lazy loading</em>Â is a design pattern commonly used in computer programming to defer initialization of an object until the point at which it is needed. It can contribute to efficiency in the program's operation if properly and appropriately used.Â  The plugin integrates <a href="https://github.com/ressio/lazy-load-xt#about">lazy-load-xt</a> with ZenPhoto20 theme page images.Â </p>
<p><em>class-video</em></p>
<p><code>MP3</code> and <code>MP4</code> file formats are now (optionally) rendered directly by the pluginÂ using the HTML5 <em>video</em> and <em>audio</em> tags rather than via a multimedia plugin.</p>
<h2>Themes</h2>
<p><em>zenFluidÂ </em>by James Brown is now part of ZenPhoto20. This is fluid theme based on the original ZenPage theme.</p>
<p><em>zpBootstrapÂ </em>has been updated to version 2.0.</p>
<hr />
<h2 style="text-align: center;">Version 1.5.0</h2>
<h2>General</h2>
<p>Several security fixes have been applied. In addition, ZenPhoto20 now traps and logs fatal PHPÂ errors. It an error occurs during setup of a plugin, that pluginÂ is disabled so that the error cannot prevent loading of the administrative pages.</p>
<p>ZenPhoto20 development testing is now limited to PHP version 7. While PHPÂ version 5.2 is still supported,Â version level compatibility issues may find their way into the source.Â Zend Technologies support for PHPÂ version 5.6 will terminate at the end of 2018. All earlier versions are already past their support life. (PHPÂ version 6 was never released.) You are strongly urged to move your site to PHPÂ version 7 asÂ soon as practical. We reserve the right to deprecate support for PHPÂ version 5 whenever supporting it becomes unmanageable.</p>
<p>ZenPhoto20 will now check for new releases on GitHub. If a release is found that is newer than the one installed, a download button will appear in the Admin utilities functionss button area. <strong>Note:</strong> this feature requires that you are using PHPÂ version 5.5 or later.</p>
<p>The register user notify option has been move to the general options page. This option is used by multiple pluginsÂ so a global setting is more appropriate.</p>
<p>The <em>backup</em> folder has been relocated to within the <em>data</em> folder.</p>
<p>The <code>shortenContent()</code> function has been rewritten. It will now count only text characters in shortening the string. Before HTMLÂ tags were counted as part of the allowed total. Page break handling is now incorporated in the function. Truncation will prefer to happen at a page break indication (<code>&lt;-- pagebreakÂ --&gt;.</code>) This allows for simplification ofÂ <code>getContentShorten()</code> which had been including HTMLÂ tags in its character count when deciding what page break to select. The <code>$forceindicator</code>Â parameter has been removed. It really made no sense and was used onlyÂ byÂ <code>getContentShorten()</code> when it rolled back to a page break. It was also not applied if no shortening was done even though that was the promise in the comment block.</p>
<p>Warnings about configuration changes will no longer be displayed on theme pages. In addition, when the warning is displayed on an admin page a button will be included to dismiss the warning. If you are comfortable that the change does not impact your site you may dismiss it and it will no longer be shown.</p>
<h2>Trans-BMPÂ character</h2>
<p>The MySQL<em> utf8</em>Â encoding supports onlyÂ <em>Basic Multilingual Plane</em>Â (BMP) characters. Many recently defined Emoji characters are coded in withÂ <em>trans-BMP</em>Â codes. E.g. ğŸŒ, ğŸï¸, ğŸ¥‘. etc. For MySql to handle these the data field character set must be set toÂ <em>utf8mb4</em>. Existing ZenPhoto20 installations encode all text fields asÂ <em>utf8</em>Â so trying to store aÂ <em>trans-BMP</em>Â character will result in data truncation at that character asÂ it is not valid inÂ <em>utf8</em>.</p>
<p>New ZenPhoto20 installations will useÂ <em>utf8mb4 encoding</em> on text fieldsÂ so long as the MySql version of the site supports that encoding. For existing installation that wish to be able to use these Emoji it will be necessary to migrate the database. See the <em>utf8mb4Migration</em> plugin below.</p>
<p>MySQL software version MUST be 5.5.3 or greater is required for support of utf8mb4 encoding.</p>
<h2>Social Media Login</h2>
<p>PluginsÂ have been added to allow loginÂ via <em>Facebook</em>, <em>Google</em>, Instagram,Â <em>Linkedin</em>, and <em>Twitter</em>. These a drop-downÂ selector on the loginÂ form will take you to the respective authorization pages. Alternatively, there are functions for each that will place a loginÂ button on your web page wherever you like. E.g. <code>facebookLogin::loginButton();</code> will place a button on your page that allows the user to loginÂ via Facebook. (You can place a button for the normal ZenPhoto20 loginÂ viaÂ <code>Zenphoto_Authority::loginButton();</code>)</p>
<h2>Language translations</h2>
<p>We have updated to <em>Poedit</em> version 2 for translating the <em>gettext()</em> strings. This version has a "pre-translate" feature which provides automated translation of strings that have not been manually translated. We have applied these <em>pre-translations</em> to the language files, so more strings will be translated. However the since the translations are mechanical they may not be as appropriate as ones translated by native speakers. As always we encourageÂ native speakers to provide proper translations.Â </p>
<h2>Admin pages</h2>
<p>The tab based menu system has been replaced by a vertical menu bar with pop-out sub menus. <strong>NOTE:</strong>Â the name of the back-end css file has been changed to <em>adminâ€‘pages.css</em>. This is because many servers cache cssÂ pages, sometimes for days. It would be really hard to use the new back-end menu system with with the old cssÂ file. Changing the name insures you get the proper menu system.Â </p>
<p>As part of this implementation features have been organized by kind of function. The utilities buttons on the overview page are now limited to "single action" functions, e.g. <em>Reset Ratings</em>. So you will find <em>OVERVIEW</em>Â sub-menus all provide "statistics" about the site, <em>ADMINÂ </em>sub-menus provide the general management of the site, etc.</p>
<p>The icons used on the administrative pages have been updated to a more minimal look and feel. In most cases the priorÂ PNGÂ image file has been replaced by a Unicode symbol. Thus the image loads have been eliminated during page rendering. All icons have been reviewed and made internally consistent.</p>
<h2>News articles</h2>
<p>The Previous and Next article links on theme news pages will now honor the category of the article. If you view a list of articles in a news category and click on the link to a specific article the previous and next article links for the article will show only articles within the originating category.</p>
<h2>plugins</h2>
<p><em>utf8mb4Migration</em></p>
<p>This pluginÂ has been provided for sites that wish to migrate to <em>utf8mb4</em> encoding on text fields such as the Description field. A button to perform migration will be placed in the <em>Development</em> area of the admin home page.</p>
<p>You should always backup your database before attempting this migration.Â <em>utf8</em>Â is a subset ofÂ <em>utf8mb4</em>Â so all data should migrate successfully.Â <strong>HOWEVER</strong>Â it is possible that the database contains characters which are invalid inÂ <em>utf8mb4</em>. This could cause the migration to fail or to lose data.</p>
<p><em>menu_manager</em></p>
<p>A new menu item type has been added so that menu htmlÂ can be generated dynamically. This allows links to use constructs that need to be evaluated when the page is being viewed like, for instance, language dependencies. Menu type <em>dynamiclink</em>Â allows you so specify PHPÂ code for the link. This code is evaluated when the link is generated. The result of the evaluation should be a well formed URI.</p>
<p><em>rating</em></p>
<p>Rating now has an option to useÂ a binary like/dislike system. If this option is chosen, visitors may vote "like" which will give a rating vote of oneÂ or "dislike" which will give a rating vote of zero. Needless to say, if you switch to this rating system you should first reset your previous ratings if you used more than one star.</p>
<p>You may also choose between small, medium, and large voting icons.</p>
<p><em>elFinder</em></p>
<p>elFinderÂ will now properly deal with case sensitivity. Image suffixes are case insensitive and for case insensitive files systems so are file/folder names. File and folderÂ visiblityÂ issues have been fixed for users who do not have ADMIN or FILE rights.</p>
<p><em>tinyMCE</em></p>
<p>The problem whereby page and news forms were deemed dirty if <em>tinyMCE </em>was enabled has been mitigated. The fix requires that the form be "Reset" after <em>tinyMCE </em>is done rendering the the text. This may take some time and the form will look dirty until the rendering is complete. So if you try to leave the form too quickly after it is rendered you will still get the warning. If this is still too sensitive you can exclude <em>tinyMCE</em>Â fromÂ Dirty Forms check via an option on the General Options page.</p>
<p><em>federated_logon</em></p>
<p>This pluginÂ has been removed and replaced by individual login plugins. <em>federated_logon</em>Â was implemented using a version of OAuth that is no longer supported by the major players. It is now available in the ZenPhoto20 development repository for anyone who still wishes to use it. Place the files in the user pluginÂ folder as with other example plugins.</p>
<h2>Themes</h2>
<p><em>effervescence+, garland, zenpage, and zpEnlighten</em></p>
<p>Themes that created custom menus did not provide for language translations of the <em>title</em>Â of the links.</p>
<p>In addition, he <em>effervescence+</em> default custom menu generated staticÂ RSS links. This was inappropriate for visitors viewing the site in a language different from the site default language. This have been corrected by using the new <strong>menu manager</strong> <em>dynamiclink</em>Â items.</p>
<p>These fixes will not be automatically applied in case you have made modifications to the custom menu. If you have made no modifications, you can simply delete the <em>theme</em>Â menu and view the theme's option page which will cause the custom menu to be regenerated. If you have modified the or duplicated the menu and use RSSÂ feed links you will need to make the appropriate changes to your custom menu.</p>
<hr />
<h2 style="text-align: center;">Version 1.4.0</h2>
<h2>General</h2>
<p>This is mostly a bug/security fix release.</p>
<p>The Zenphoto20 site configuration details HTML comment is no longer displayed unless the build is marked as a Debug Build.</p>
<p>Various JavaScript scripts have been updated to their current versions.Â </p>
<p>Zenphoto20 no longer uses (or displays) the GitHub release id. The current release methodology insures that the version number changes whenever there is an update made to the master.</p>
<h2>Admin pages</h2>
<p>The admin pages have been made a bit more responsive. There is also now a "back to top" button that will float down the right hand side if you scroll the page. This lets you easily scroll back to the page start.</p>
<p>The presentation of multi-lingual edit fields has been re-done to make editing more convenient. Instead of a list of languages that you must scroll to the one you wish to change a drop-down of language selectionsÂ will be presented over a single editable field. Select the language you want to change and its content will be in the editable field.</p>
<p>Note: All the enabled language flags will be shown. As of the 1.4 release this is nineteen languages. You should disable any languages you are not translating in order to reduce the languages shown. (Reducing the number of languages will also speed up admin page loads, specially when the TinyMCE plugin is enabled since there will not be so many fields to render.)</p>
<p>As a result of the above change, the <code>$ullist</code>Â parameter to <code>print_language_string_list()</code> has been deprecates as there is no longer an UL list of language fields.</p>
<p>The colorpicker custom option has been updated to use a newer more compact color pallet picker JavaScript.</p>
<p>The erroneous "Are youÂ sure you want to leave..." action for when a form has not been changed has been fixed.</p>
<h2>Themes</h2>
<p><em>PARADIGM by </em>OlivierÂ FfrenchÂ has been added to the theme distribution.</p>
<p>Several themes which have selectable "theme colors" have been enhanced so that <code>themeSwitcher</code>Â will allow selection of the color.</p>
<h2>Plugins</h2>
<p><em>downloadList</em>:</p>
<p>Added the ability to download images found by a search.</p>
<p><em>googleMaps:</em></p>
<p>Add option for the googleMapsÂ API key.</p>
<p><em>purgeOptions</em>:</p>
<p>Improved the layout of the Options:Purge tab for better space usage. Added posting a Setup request when options for an active (not missing) element are purged so that the element may re-establish its default options.</p>
<p><em>themeSwircher</em>:</p>
<p>When a theme does not have a script for the current page the selector for it in the drop downÂ list will be disabled. This avoids the 404 error if the theme were selected. Duplicate theme names are more gracefully handled by showing the version in the drop down.</p>
<p><em>user_mailing_list</em>:</p>
<p>The messages will be sent asynchronously to each user selected. There will be a delay between sending each mail to minimize load on the Â mail server and reduce the possibility that the mail stream will be flagged as SPAM.</p>
<hr />
<h2 style="text-align: center;">Version 1.3.0</h2>
<h2>Performance</h2>
<p>The number of SQLÂ requests executed on a front-end page load have been significantly reduced. Frequently executed query have been cached so that the results are delivered without re-executing the query. <em>Default</em> options are set only when <em>setup</em> is executed. Checking for scheduled objectÂ <em>publish</em> state changes now happens on the <em>cache-expiry</em> frequency.</p>
<p>If a page is loaded from the cache there will be only theÂ hand full of queries needed to establish the page context.</p>
<p>As part of this implementation a new mechanism is provided to force image processing on any un-cached image link that is found during cache processing of a page. When the page is next loaded it will be "clean" and therefore a cache image will be created.</p>
<h2>Setup</h2>
<p>PluginsÂ and themes are now passed a &amp;from=version parameter giving the version number of the previously installed release. This can be used to condition such things as migrating to new theme/pluginÂ features.</p>
<p>The mechanism for migrating database changes had been improved to speed up the <em>setup</em> process. The ZenPhoto20 package now includes a template of how the database should look. Previously whenever a change was made to the database the code in <em>setup</em> had to be manually changed to reflect the changes both to fresh installations and to updates. Over time the list of SQLÂ statements <em>setup</em> needed to execute to insure that the database was correct had become excessive. The queries were executed each time <em>setup</em> was run but in general did nothing since the database structure has been stable for several releases.</p>
<p>Now when updating an installation there will not be any SQLÂ statements issued unless there truly has been a change to the database structure in the new version of the software.Â </p>
<p>There are now comments set for any database field used by ZenPhoto20. For a "normal" site all the database fields will have comments. It is possible that your database contains fields used by previous instances of the software. If that is the case, these fields will have not have a comment. You can safely drop any such field that you did not specifically create. (If you did create such a field manually you should consider using theÂ <em>customFieldExtenderÂ </em>mechanism to implement the additions so that they conform to the new paradigm.)</p>
<h2>Plugins</h2>
<p><em>accessThreshold:</em></p>
<p>If you are experiencing denial of service attacks from specific networks this plugin may help mitigate the problem. The plugin monitors front-end page requests and tallies them by IP address (or sub portion thereof.) If the request threshold is exceeded script loading will stop without sending a response.</p>
<p><em>fieldExtender:</em></p>
<p>The base class has been extended to allow custom field extender pluginsÂ to assert that fields should be added to the search list by default. Fields may also be added to bulk action drop-down lists. See the <em>fieldExtenderÂ </em>comment for details. The "get" and "set" methods for custom fields are now defined for the object. E.g. you can use <code>$obj-&gt;getXXX();</code> and <code>$obj-&gt;setXXX('data');</code> to access and update the fields.</p>
<p><em>customData:</em></p>
<p>This plugin has been moved to the <em>User Plugins</em> folder and is no longer actively supported as a ZenPhoto20 plugin. If you have need of custom fields in your database you should create a version of the <em>customFieldExtenderÂ </em>pluginÂ to define unique fields for your use.</p>
<p><em>seo_locale:</em></p>
<p>This plugin is now merged with the dynamic-locale plugin. This consolidates language selecting link options in one location for easier management.</p>
<p><em>LDAP_auth:</em></p>
<p>Implements logon to ZenPhoto20 using an LDAP server. Options allow mapping of LDAPÂ posix style groups to ZenPhoto20 groups.</p>
<p><strong>NOTE:</strong> plugin based authentication scripts are not enabled during <em>Setup</em> processing. You will need to define and maintain a ZenPhoto20 master user to install ZenPhoto20.</p>
<hr />
<h2 style="text-align: center;">Version 1.2.0</h2>
<h2>Plugin option edit tab</h2>
<p>There is now a link to the next and previous plugins (alphabetically) at the bottom of the plugin option page.</p>
<h2>Admin tab consolidation</h2>
<p>The <em>Debug</em> plugin subtabs have been consolidated with the <em>Development</em> subtabs to reduce the number of administration tabs. In addition, the pluginÂ categories have been revisited. <em>MacroList</em>, <em>rewriteRules</em>, and <em>rewriteTokensÂ </em>have been moved to the <em>development</em> category.</p>
<h2>tinyMCE:obj insertions</h2>
<p>The object insertion mechanism has been extended to add inserting <em><strong>MEDIAPLAYER </strong></em>and <em><strong>SLIDESHO</strong></em> macros. <strong><em>MEDIAPLAYER</em></strong> macro insertion is available for video type images. <em><strong>SLIDESHOW</strong></em> macro can be inserted from album selections.</p>
<h2>News articles</h2>
<p>The state of being not categorized is really also a category. ZenPhoto20 now recognizes this in the category selection drop down on the news tab. Selecting <em>Un-categorized</em> will show all articles that do not have a category assigned. <em>Un-categorized</em> is now also a managed news category.</p>
<p>Restrictions have been added to prevent users without appropriate management rights from creating news articles in a category they do not have management rights to. This includes the <em>un-categorized</em> category.</p>
<h2>Display Character Set</h2>
<p>Websites will now use the UTF-8 character set exclusively. This simplifies a number of things and keeps users from "getting in trouble" if they attempt to change the <em>characterset</em> option setting. If it is really necessary for a site to display with a character set other than UTF-8 you may define the display character set in the configuration file.</p>
<h2>Theme appearance improvements</h2>
<p>The link that exposes the <em>admin toolbox</em> has been changed to a <em>gear</em> icon to minimize its presence on theme pages. Likewise the <em>themeSwitcher</em> plugin now shows a <em>menu</em> icon rather than the full selector. Clicking on the <em>menu</em> icon exposes the theme switching selections.</p>
<p>Third party themes which style the <em>admin toolbox</em> may need to change their styles for the main link to take full advantage of this appearance improvement. If the theme is relatively "standard" all that is needed is to delete the <code>#admin</code> and <code>#admin_data</code> styles from the theme CSS as ZenPhoto20 will load a default CSS for the toolbox.</p>
<p>As with other theme oriented files, themes can place custom versions of <code>images/gear.png</code> and <code>themeSwitcher/menu.png</code> in the theme folder to customize the icons shown. There is also a new filter--<code>iconColor</code>-- to allow selection of different colored menu and gear icons if the theme has configurable background colors. An example of this filter can be found in the <code>basic</code> theme and the <code>effervescence+</code> theme.</p>
<h2>Album sort order selection</h2>
<p>Album and subalbum sort order may now be chosen from a selector on the album tabs.</p>
<h2>Tag handling for albums <em>mass-edit</em> and multiple image tabs</h2>
<p>The ability to add tags to albums and images has been extended to the multiple item tabs. Previously this function was removed due to problems with some PHP installations where the amount of data "posted" when the apply button was pressed exceeded the capacity defined by the server. This resulted in not being able to save from these pages unless the number of items per page was reduced. (An option not available for the album mass-edit tab.)</p>
<p>It is now possible to add tags to items on these pages.No list of possible tags is shown since that might cause some of the above issues. But <em>tag_suggest</em> will make suggestions from the existing tag list and you can create new tags by simply typing them in the <em>add tag</em> field. Individual tags cannot be removed. However you can elect to clear existing tags so only those you add will be present after the apply button is pressed.</p>
<h2>Database storage for image metadata fields</h2>
<p>ZenPhoto20 now allows for database columns for image metadata to be optional. You can reduce the size of image database records by marking the ones you do not need <em>do not process</em> on the<em> image options</em> tab. When <code>setup</code>is run it will add or remove fields based on this setting. There is an additional checkbox on that tab, <em>Mark unused fields do not process</em>, that will cause ZenPhoto20 to examine the database for metadata columns that have not had any data stored. These are then marked <em>do not process</em>. Before using this option you should insure that you have a representative set of images and have refreshed their metadata so as to not remove columns that you might want.</p>
<p>The <em>class-video</em> and <em>xmpMetadata</em> plugins will create database columns for their metadata only if they are enabled when <code>setup</code> is run.</p>
<p>You may see a "configuration change" notice when you change the state of these options. This will indicate that a <em>setup request</em> has been made (and by what process.) This is a reminder that the change will not take effect until you have run <code>setup</code> so data that might be stored in these fields may not be saved to the database.</p>
<h2>Plugins</h2>
<p><em>cloneZenphoto:</em></p>
<p>This plugin is now presented by an administrative tab rather than a Utilities button. The tab will list links to existing site clones for easy reference.</p>
<p><em>galleryArticles:</em></p>
<p>The body of the article created is dynamically fetched from the description of the object. Previously it was captured at the time the article was published so did not track changes to the object's description. In order to accomplish this <em>galleryArticles</em> declares a macro named GALLERYARTICLEDESC.</p>
<p><em>tagsFromMetadata:</em></p>
<p>This plugin will allow you to select specific metadata items from an image and set the values of these items as tags for the image. So, for instance, you can select <em>EXIFMake</em> and all your images will be tagged with the camera manufacturer's name (provided that camera does record that metadata item.) Tags will be created in each enabled language provided there is a unique translation in that language for the item.</p>
<p><em>tagFromSearch:</em></p>
<p>This plugin provides a means to tag objects found by a search. In addition, it (optionally) forces searches by visitors and users without <em>Tags</em> rights to be limited to the tags field.<br /><br />Thus you can apply a unique tag to results of a search so that they are "related" to each other. If you have selected the optional <em>Tags only</em> search <em>normal </em>viewers are limited to searching for defined tags.</p>
<p><em>debug:<br />markRelease:</em></p>
<p>The <em>markRelease</em> plugin has been consolidated into the <em>debug</em> plugin. In addition the functionality of the <code>Mark release</code> button is extended by plugin options to allow you to refine the debugging options that are set.</p>
<p><em>ipBlocker:</em></p>
<p>The plugin has been extensively rewritten to improve both performance and reporting of its actions. A new capability is added to monitor 404 errors and suspend ip address that generate them too quickly.</p>
<p><em>tinyZenpage:</em></p>
<p>This plugin is permanently removed. Its functionality was replaced by the tinyMCE:obj plugin.</p>
<p><strong>Image rotation fixes</strong></p>
<p>The original <em>zenphoto </em>code that handled image rotation was confused about the meanings of each of the <em>EXIF orientation</em> values. This was originally mitigated by also being confused as to how the<em> GD library</em> rotations worked. These two errors offset each other. But then the <em>Imagic </em>library was implemented. It rotated images in the opposite direction from the <em>GD library.</em></p>
<p>Then someone noticed that GD rotated in the opposite direction from <em>zenphoto's </em>assumptions and "fixed" the code. This broke situations where a camera recorded the image rotation instead of just rotating the image as is normal.</p>
<p>We have now fixed the implementation to be true to the specification. Camera set rotations now will work correctly. Unfortunately the downside of this is if you have "fixed" your images on the prior software they may now be improperly rotated. You should re-import the image metadata or select the correct image rotation on the image tab.</p>
<h2>News article sort order selections</h2>
<p>You may now select ordering by <em>Published date</em>, <em>Last change date</em>, and <em>Expiry date</em> in addition to the original <em>creation date</em> and <em>title </em>orders. <em>Creation date</em> (or <em>Last change date</em>) are now shown in addition to the <em>Published date</em>.</p>
<h2>Security</h2>
<p>PluginsÂ are now required to register functions they wish to be called via the admin utility button action. The function name must be stored in the <code>$_zp_button_actions</code> array. Actions not registered will be ignored.</p>
<p>Tightened up the PHP theme editor so that it is restricted to editing only files within the theme.</p>
<p>Fixes a hole whereby a hacker could cause your setup scripts to become unprotected.</p>
<p>Fixes VN: JVN#68452022 / TN: JPCERT#95351432</p>
<p>Fixes some strings that were not encoded before display.</p>
<hr />
<h2 style="text-align: center;">Version 1.1.0</h2>
<h2>New theme</h2>
<p><a href="http://www.vincentbourganel.fr/news/zpbootstrap-a-responsive-theme-zenphoto-zenpage">zpBootstrap</a>â€”a responsive theme by Vincent Bourganel has been added to the distributed themes set.</p>
<h2>Tag lists will reflect published state of the object</h2>
<p>Tag suggestion lists and <code>html_meta_tags</code> keywords will not be gated by the published state of objects. Specifically, if the site viewer is not logged-in then tags associated with objects marked <em>unpublished</em> will not be included in the counts. This means, for instance, that if a tag is associated only with unpublished objects it will not be included in these lists. Note: object hierarchy is not applied in this for performance reasons. Thus for instance tags of <em>published</em> images in an <em>unpublished</em> album will be included.</p>
<h2>Rationalization of published states</h2>
<p>The show() method of all objects now correctly reflects if the object is currently published. The show() method for objects which have a future publishing date will return false until the publishing date has occurred. At that time true will be returned. For objects that have expiry dates, once that date has passed the object will become unpublished and the <code>show()</code> method will return false.</p>
<p>If you explicitly publish an object that has expired or whose publish date is in the future then the expiry and publish dates will be cancelled.</p>
<p>This means that the database <code>show</code> column is the sole arbitrator of whether an object should be visible to the general public.</p>
<h2>Dynamically translatable image metadata strings</h2>
<p>Prior to this change, when metadata was imported from an image, text strings describing the data were translated in the language of whomever was viewing the image when it was first discovered. This data was then stored into the database for future display. The result of this defect was that these strings were often in the "wrong" language for the current viewer.</p>
<p>The string translation is now delayed until the data is about to be displayed. This insures that the current language will be used for the translation.</p>
<p>Please note that metadata collected before this change will have been statically translated and cannot be re-translated. You should perform a "Refresh Metadata" operation to get existing metadata updated to the dynamically translatable form.</p>
<h2>Tag handling improvements</h2>
<p>Stored tags no longer are quoted if they contain special characters. This allows them to be suggested by typing the fist character. The database is automatically updated during setup and metdata importation will insure that tags are not quoted.</p>
<p>The <em>tag_suggest</em> target tag selection algorithm has been re-written for performance improvements. You would see these as browser slow-downs when you type in the textbox of the search form or the tags textbox on the admin pages.</p>
<p>There is also an option for tag suggestions on theme pages. This option allows you do filter tags so that only frequently used ones are suggested. You set the option to the threshold usage count and only tags used at least that number of times will be offered as suggestions.</p>
<h2>Spelling correction in <em>tinyMCE</em></h2>
<p>A plugin is provided to enable use of <em>nanospell</em> with any <em>tinyMCE</em> editor window. <strong>NOTE</strong>: <em>nanospell</em> is NOT included with ZenPhoto20. Use of <em>nanospell</em> requires a specific <a href="http://tinymcespellcheck.com/license">license</a> for use so you must select the appropriate license/download. Instructions for installing <em>nanospell</em> are included with the plugin documentation.</p>
<h2>Search tag selection</h2>
<p>An "all" checkbox has been added to the search form to more conveniently select a small number of fields from a larger list.</p>
<h2>ZipArchive</h2>
<p>ZipArchive is a PHP module for processing Zip files. If this module is configured in a sites PHP build ZenPhoto20 will use it rather than loading third party Zip file handlers.</p>
<h2>Extended security question foils</h2>
<p>Security question foils (those questions asked that were not supplied by the user) are an important security feature. If only valid security questions are presented then hackers can tell if they have successfully guessed a user id and will know that there is an answer to the question. Thus it is only a matter of guessing the answer which can often be done by examining publicly available information about the user.</p>
<p>There are two enhancements to security questions implemented now. First, the administrator may create as many foils as he wishes to increase the work a hacker must do to try to hack an answer. Second, security questions provided by other users may be presented, again increasing the work of hackers.</p>
<h2>Checkbox toggle for search fields</h2>
<p>The search form now has a toggle to check/un-check all search fields. This makes it easier to search on a limited number of the possible fields.</p>
<h2>Mouse click minimization</h2>
<p>When you "apply" changes on admin edit tabs you will now be returned to the page that launched the edit. That is if you use the front-end admin toolbox to edit an image the apply button will return you to the image page. If you got there from the "Edit all image data" link you will return to the page of images. This behavior is cancelled if any errors occur.</p>
<p><strong>Performance enhancements</strong></p>
<p>Code optimizations have been applied as indicated by the XDebug profiler.</p>
<h2>New dropdown selector on the news articles page</h2>
<p>There is now a drop-down selector to allow showing articles of a specific author. In addition, the "data" selector has been fixed to work when a category is also selected.</p>
<h2>Added support for tablets</h2>
<p>The <em>touchPunch</em> plugin is now available to enable touch drag and drop for image, album, and page sorting.</p>
<h2>Dynamic album enhancement</h2>
<p>There is now a facility to manually create a dynamic album. In this case an administrator directly enters the search criteria rather than capturing it from a search.</p>
<h2>Wireless Application Protocol Bitmap support (GD library)</h2>
<p>The GD library will now recognize <em>wbmp</em> (<em>wbm</em>) files. This change removes <em>bmp</em> (which the library does not support) from its list.</p>
<h2>Favorites plugin enhancements</h2>
<p>A new function, <em>favorites::listWatchers()</em>, is available to assists in output of users watching an object. The plugin now uses a DL list to show the watchers on the administrative tabs.</p>
<h2>Resizable language string input areas</h2>
<p>If the <em>Multi-lingual</em> option is selected text input areas such as <em>page</em> and <em>article </em>content fields can be expanded by dragging on the resize handle at the lower right of the field. If tinyMCE is enabled the individual language edit boxes expand giving the ability to see multiple language translations at a time.</p>
<h2>TinyMCE language directionality</h2>
<p>Normally TinyMCE will set the <em>language directionality</em> based on the language in effect. E.g. if the language is Persian, Arabic, Hebrew, Hindi, or Urdu the language direction will be <em>right-to-left</em>. Otherwise it is <em>left-to-right</em>. There is now an option to override this setting and force <em>right-to-left</em> for those cases where this selection is not appropriate. In addition the tinyMCE editor has buttons (where selected) and <em>tool</em> settings to change the text direction.</p>
<h2>Download for dynamic albums and favoitied</h2>
<p>The <em>downloadList</em> plugin now supports "album zips" for dynamic albums and for the user's favorites.</p>
<h2>Sub-rights for pages and news categories</h2>
<p>Users may now be given "view-only" rights to pages and news categories by un-checking the <em>edit</em> sub-right of the object in the managed objects list. You can also allow users to view un-published items that are members of a category or offspring of a page by checking the <em>view unpublished</em> checkbox (either for the managed object or the global setting.)</p>
<h2>Optional Object Fields</h2>
<p>Many of the fields associated with album, image, article, and page objects are now optional. The standard configuration is provided by the <code>optionalObjectFields</code> plugin. If you want none of these fields, simply disable the plugin. If you want your own subset of the fields you can make a copy of the <code>optionalObjectFields</code> plugin in the plugins folder. Edit the array in the <code>fields()</code> method to remove the elements of the fields you do not want supported. Run setup and the fields will be gone.</p>
<h2>Multi-llingual custom field extensions</h2>
<p>The custom field extension feature now supports multi-lingual fields. It also allows you to provide custom formatting on the admin tab and custom processing of the "saves" data.</p>
<h2>User management improvements</h2>
<p>User and group lists are now sorted via a case insensitive natural sort. In cases where there are check boxes, those users with the box checked are shown at the top of the list.</p>
<h2>Cloning improvements</h2>
<p>When you clone an installation ZenPhoto20 will automatically setup the configuration and initial user of the clone. The initial user will be the user who executed the clone operation. He his logon to the clone install will be identical to the his logon to the master when the clone was created.</p>
<p>If setup is run on the master it will provide a set of links to allow setup to be run on the clones as well. Thus the setup of a site is better automated. (We did try automatically running setup on the clones but ran into several browser issues such as pop-up blockers that were not circumventable.)</p>
<p>When you change the site state of the master site (close, close for test, open) the change will be applied to the clone sites as well.</p>
<h2>Canonical URLs</h2>
<p>ZenPhoto20 _rewrite_ processing will now cause a "301 permanently moved" redirect if it receives a link that does not conform to the Canonical standard it implements. Basically this means that links that "look" like indexes to sub-items (albums and the News index, for instance) will end with a trailing slash. Items which are interpreted as "final destinations" (An image or single news item, for instance) will not have a trailing slash.</p>
<h2>New plugins</h2>
<ul>
<li><em>overrideEXIFDesc: pprovides</em> a means to compensate for software or cameras which place the image description in the<em> EXIF desc</em> field which by standard is used for the image title.</li>
<li>optionalObjectFields: extends the use of <em>customFieldExtender </em>to allow certain object fields to be omitted. The distributed version of the plugin supports all the "standard" object fields. You can customize it to add/remove fields of your choice.</li>
</ul>
<h2>Bug Fixes</h2>
<p>As usual, I have fixed bugs found while implementing these features and ones reported on the Zenphoto.org forum that were applicable to ZenPhoto20.</p>
<hr />
<h1 style="text-align: center;">Version 1.0.0</h1>
<h2>Fresh start</h2>
<p>ZenPhoto20 has been forked from the Zenphoto.org 1.4.6 release. Some cleanup of code and fixes have been applied and some small new features added. Themes and plugins that are compliant with Zehphoto 1.4.6 (without use of the deprecated-functions plugin) will work with this software.</p>
<p><strong>Note:</strong> part of this cleanup was to purge the deprecated functions for a fresh start. Lingering calls to these functions will now result in a PHP fault. If you have a custom theme it is recommended you first use the <em>check deprecated use</em> button in the Zenphoto 1.4.6 admin utilities to be sure that you are not using one of the functions which is no longer available.</p>
<h2>Eliminate the concept of "supported" unsupported themes and plugins</h2>
<p>Instead of having a repository for "unsupported" scripts and themes we will include then in the package. Example plugins will reside in the <code>plugins</code> folder. New themes will, of course, be found in the <code>themes</code> folder.</p>
<p>Newly included themes: gray_highlights (an albums only theme), zpArdoise, zpEnlighten, zpfocus, zpminimal, zpmasonry, and zpskelleton.</p>
<p>Newly included example plugins: cacheHeader, cookieInvalidator, create_album, customFieldExtender, disableAction, disableWatermark, filter-fileSearches, galleryToken, headConsolidator, no_show, pluginEnabler, showNoUserRights, single_album, and text_watermark.</p>
<p>Inclusion of other themes and plugins will be considered by request.</p>
<h2>New release packaging</h2>
<p>Each "tagged" release includes a zip file containing a self-extracting installation script. This file is about one third the size of the individual source files (of which there are about 2000.) So uploading a new release is considerably faster.</p>
<p>Running the script extracts the release source scripts and then starts the setup process. This work flow is less prone to such things as mis-matched versions of the individual files or overwriting album files.</p>
<h2>Suffix-less image links</h2>
<p>If you use <em>mod_rewrite</em> with a <em>mod_rewrite suffix</em> and your image names are unique in their prefix you can select the option <em>Unique images</em> on the general options tab so that your image page links will not include the image suffix. For instance if your <em>mod_rewrite suffix</em> is <code>.htm</code> then the link to the image <code>myalbum/myimage.jpg</code> will have the link <code>myalbum/myimage.htm.</code></p>
<p>Â </p>
<h2>tinyMCE:obj plugin</h2>
<p>This plugin replaces tinyZenpage as the preferred means for inserting ZenPhoto20 objects into tinyMCE editor windows.</p>
<p>On the back end each object has a "pick" icon (<img src="https://cloud.githubusercontent.com/assets/2474007/3194486/59db3546-ecff-11e3-8c27-e5c44fd92f2b.png" alt="add" />) that you use to select the object. The overview lists also have a pick icon for each object, so it is not necessary to browse all the way to the object's tab.</p>
<p>Click on the icon to select the object for pasting. Then go to your tinyMCE editor window, place the cursor where you want the insertion, and select either the tinyMCE:obj paste button on the toolbar or the tinyMCE:obj dropdown from the <em>Insert</em> menu item. This will bring up the tinyMCE:obj handler. Select any options you wish and press the <code>paste</code> button.</p>
<p>You can even paste custom sized/cropped images. When you have selected an image object a link is included that takes you to a "cropping" page. Set up the image crop as pleases you, click on the "Done" button and you will be back in the tinyMCE:obj window with your custom cropped image ready to insert.</p>
<h2>Copy-able object links for all objects</h2>
<p>A side benefit of the tinyMCE:obj implementation is that you can also use your clipboard to copy and paste links to spots other than tinyMCE editors.</p>
<p>The administrative tabs for <em>Page</em>, <em>News articles</em>, category, <em>Image</em>, and <em>Album</em> objects now provide link text that can be copied to the clipboard and pasted wherever desired. (For instance into the content of a <em>News article</em>.) In the case of Images, the <em>crop image</em> function will give a link that will produce the cropped version of the image. These latter are easily inserted into your <em>News article</em> and <em>Page</em> contend by the <em>tinyMCE:obj</em> insert image feature.</p>
<h2>Purge option for theme and plugin options</h2>
<p>This feature provides a convenient means to remove options of deleted and forgotten themes and plugins. Of course it also allows you to "start from scratch" on current ones.</p>
<h2>Custom option handler NUMERIC type option.</h2>
<p>Allows themes and plugins to specify that an option be numeric. This allows a shorter input field. Also the data is validated as numeric when updated.</p>
<h2>Favorites albums</h2>
<p>Create albums from your favorites that can be viewed by others. Favorites albums are essentially "dynamic" albums with the criteria being the selected favorites instance.</p>
<h2>Improved deprecated function handling</h2>
<p>Use of deprecated functions is now logged rather than indicated by a PHP notice. This of course presumes that the deprecated functions plugin is enabled.</p>
<p>These errors are logged in a new <code>deprecated</code> log to separate them from other issues and make them easily findable. Only one instance of any particular use of a deprecated function is logged, so the log is not cluttered.</p>
<h2>Improved "dirty form" handling</h2>
<p>We have switched the JavaScript that detects form changes and warns if you leave the page. This script better integrates with the <em>tinyMCE</em> editor. This implementation also recognizes "clean" links--that is links that do not actually leave the page. You will not be warned unnecessarily when clicking these links.</p>
<h2>elFinder Theme editor</h2>
<p>If enabled elFinder will be used to edit themes.</p>
<h2>Image metadata transformation option</h2>
<p>There is now an option to allow newlines in image metadata to be converted to <code>&lt;br /&gt;</code> tags. This option applies to any metadata destined to the ZenPhoto20 <em>description</em> or <em>title</em> database fields. The raw metadata is left unchanged. This transformation occurs when a new image is discovered or if medadata is refreshed.</p>
<h2>Plugin tabs</h2>
<p>The tab categories of plugins have been reorganized and simplified. In addition, a new tab "enabled" has been created to list all enabled plugins regardless of their category.</p>
<h2>Language specific tags</h2>
<p>Tags may now be assigned a language on the <code>tags</code> tab. If a tag is associated with a language it will not be displayed unless the viewer's language matches the tag language. The default is for tags to be visible in all languages.</p>
<p>Along with this change comes two new sorting orders for the <code>tags</code> tab. Tags can be sorted by language and most recently added as well as alphabetically and by use count.</p>
<h2>General unification of objects and names</h2>
<p>There was considerable inconsistency in both the naming and the methods used in zenphoto objects. We have made progress in making things more uniform. But don't fret. If you have custom plugins or themes from zenphoto version 1.4.6 or later there is a <code>zenphotoCompatibilityPack</code> plugin that will keep them running just fine.</p>
<h2>General bug fixes</h2>
<p>I have fixed multiple bugs discovered either in my efforts to provide the above or from discussions on Zenphoto forums and tickets.</p>
<h2>New plugins</h2>
<ul>
<li><em>debug</em>: provides tools for debugging your site such as <em>PHPinfo</em>, <em>locale</em> information, etc.</li>
<li><em>customData</em>: Generally you should not be using the custom_data field of objects now that the <em>customFieldExtender</em> example plugin is availiable. But for legacy use this plugin enables the field on object edit pages.</li>
<li><em>purgeOptions</em>: see above.</li>
<li><em>favoritesAlbums</em>: see above.</li>
<li><em>themeEditor</em>: This is the legacy theme editor which may be used instead of elFinder.</li>
<li><em>zenphotoCompatibilityPack</em>: A plugin that provides a bridge to Zenphoto.org's 1.4.6 release compatible plugins and themes.</li>
</ul>
	</body>
</html>
